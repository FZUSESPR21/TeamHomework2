<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.scoringsystem.mapper.StudentMapper">
    <resultMap id="data" type="com.example.scoringsystem.bean.UserWithTaskAndScore">
        <result property="stuAccount" column="account"/>
        <result property="stuName" column="userName"/>
        <collection property="taskList" ofType="com.example.scoringsystem.bean.TaskResult">
           <result property="taskName" column="taskName"/>
           <result property="score" column="score"/>
        </collection>
    </resultMap>

    <select id="getchart" resultMap="data">
        select u.account as account, u.user_name as userName, t.task_name as taskName,us.sys_score as score
        from user u
        left join user_score us on us.user_id = u.id
        left join task t on t.sys_id = us.task_id
        where u.account like 's%'
        order by u.id,t.create_time
    </select>
</mapper>