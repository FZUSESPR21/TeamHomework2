<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="layui/css/layui.css">
    <script src="layui/layui.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/select.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/option.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap-table/dist/bootstrap-table.min.css">
    <link rel="stylesheet" href="css/table.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-table/1.15.4/bootstrap-table.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-table/1.15.4/locale/bootstrap-table-zh-CN.min.js"></script>
    <link rel="stylesheet" href="css/snstyle.css">
</head>
<body>
<ul class="layui-nav">
    <li class="layui-nav-item layui-this" id="manage-content">
        <a onclick="manageClicked()">内容管理<span class="layui-nav-item"></span></a>
    </li>
    <li class="layui-nav-item">
        <a onclick="userClicked()">用户管理<span class="layui-nav-item"></span></a>
    </li>
    <li class="layui-nav-item">
        <a onclick="analysisClicked()">统计分析<span class="layui-nav-item"></span></a>
    </li>
    <li class="layui-nav-item" id="my-message">
        <a href=""><img src="//t.cn/RCzsdCq" class="layui-nav-img">我</a>
        <dl class="layui-nav-child">
            <dd><a href="javascript:;">修改信息</a></dd>
            <dd><a href="javascript:;">退出</a></dd>
        </dl>
    </li>
</ul>
<div class="sidebar">
    <ul class="layui-nav layui-nav-tree" lay-filter="test" lay-shrink="all" id="content-manage">
        <!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
        <li class="layui-nav-item">
            <a href="javascript:;">评分细则管理</a>
            <dl class="layui-nav-child">
                <dd><a href="">所有细则</a></dd>
                <dd><a href="javascript:;">增加细则</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:;">成绩管理</a>
            <dl class="layui-nav-child">
                <dd><a href="javascript:;">成绩查询</a></dd>
                <dd><a href="">博客评分</a></dd>
                <dd><a href="">答辩评分</a></dd>
                <dd><a href="">博客列表</a></dd>
            </dl>
        </li>
    </ul>

    <ul class="layui-nav layui-nav-tree" lay-filter="test" lay-shrink="all" id="user-manage">
        <!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
        <li class="layui-nav-item">
            <a href="javascript:;">团队管理</a>
            <dl class="layui-nav-child">
                <dd><a href="">所有团队</a></dd>
                <dd><a href="javascript:;">增加团队</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">结对管理</a>
            <dl class="layui-nav-child">
                <dd><a href="javascript:;">结对信息</a></dd>
                <dd><a href="">增加结对</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:;">学生管理</a>
            <dl class="layui-nav-child">
                <dd><a href="javascript:;">学生列表</a></dd>
                <dd><a href="">增加学生</a></dd>
            </dl>
        </li>
    </ul>

    <ul class="layui-nav layui-nav-tree" lay-filter="test" lay-shrink="all" id="statistical-analysis">
        <!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
        <li class="layui-nav-item  layui-nav-itemed">
            <a href="javascript:;">统计分析</a>
            <dl class="layui-nav-child">
                <dd><a href="linechart.html""">千帆竟发图</a></dd>
            </dl>
        </li>
    </ul>
</div>


<!--将各个部分代码填在以下div内-->
<div class="page-wrapper">

    <table id="myTable" class="table table-hover text-nowrap"></table>
</div>

<script>
    function manageClicked() {
        document.getElementById("content-manage").style.display="block";
        document.getElementById("user-manage").style.display="none";
        document.getElementById("statistical-analysis").style.display="none";
    }
    function userClicked() {
        document.getElementById("content-manage").style.display="none";
        document.getElementById("user-manage").style.display="block";
        document.getElementById("statistical-analysis").style.display="none";
    }
    function analysisClicked() {
        document.getElementById("content-manage").style.display="none";
        document.getElementById("user-manage").style.display="none";
        document.getElementById("statistical-analysis").style.display="block";
    }
    $('#myTable').bootstrapTable({
        method: 'get',
        url: "getTable", // 请求路径
        striped: true, // 是否显示行间隔色
        pageNumber: 1, // 初始化加载第一页
        pagination: true, // 是否分页
        sidePagination: 'client', // server:服务器端分页|client：前端分页
        height:600,
        sortable: true,
        sortName:'学号',
        sortOrder: 'desc', //按学号升序排序
        search: true,
        showColumns: true, //筛选要显示的列
        showSearchClearButton: true, //显示搜索清除按钮
        pageSize: 10, // 单页记录数
        pageList: [10, 15, 20],
        // sidePagination: "server", //表示服务端请求
        // //设置为undefined可以获取pageNumber，pageSize，searchText，sortName，sortOrder
        // //设置为limit可以获取limit, offset, search, sort, order
        // queryParamsType : "undefined",
        // queryParams: function queryParams(params) { //设置查询参数
        //     var param = {
        //         pageNumber: params.pageNumber,
        //         pageSize: params.pageSize,
        //         orderNum : $("#orderNum").val()
        //     };
        //     return param;
        // },
        // onLoadSuccess: function(){ //加载成功时执行
        //     layer.msg("加载成功");
        // },
        // onLoadError: function(){ //加载失败时执行
        //     layer.msg("加载数据失败", {time : 1500, icon : 2});
        // }
        paginationLoop: true,
        paginationHAlign: 'left',
        paginationDetailHAlign: 'right',
        paginationPreText: '上一页',
        paginationNextText: '下一页',
        queryParams: function(params) { // 上传服务器的参数
            var temp = {
                name: 1
            };
            return temp;
        },
        columns: [{
            checkbox: true
        }, {
            title: '学号',
            field: 'id',
            sort: true,
            sortable: true,
            searchable:true,
        }, {
            title: '姓名',
            field: 'name',
            sort: true,
            sortable: true,
            searchable:true,
        }, {
            title: '班级',
            field: 'class',
            sortable: true,
        }, {
            title: '分数',
            sortable: true,
            field: 'score',
        }, {
            field: 'operate',
            title: '操作',
            align: 'center',
            valign: 'middle',
            events: {
                'click #edit': function (e, value, row, index) {
                    window.location.href="http://www.baidu.com";
                },
                'click #delete': function (e, value, row, index) {
                    deleteInfo(row.Id);
                }
            },
            formatter: function (value, row, index) {
                var result = "";
                result += '<button id="edit" class="btn btn-info" data-toggle="modal" data-target="#editModal">编辑</button>';
                result += '<button id="delete" class="btn btn-info" style="margin-left:10px;">删除</button>';
                return result;
            }
        }
        ]
    })

    // 修改信息
    function editInfo() {
        $.ajax({
            type: 'post',
            url: 'test.json',
            dataType: 'json',
            data: {
                id: $('#id').val(),   //.val获取value值，而.html获取标签内的所有内容
                name: $('#name').val(),
                gender: $('#gender').val(),
                age: $('#age').val()
            },
            success: function (data) {
                if (data == 'Yes') {
                    $('#table').bootstrapTable('refresh');
                    $('#editModal').modal('hide');
                }
                else {
                    alert('修改失败');
                }
            }
        })
    }

    // 删除信息
    function deleteInfo(id) {
        $.ajax({
            type: 'post',
            url: 'getTable',
            dataType: 'json',
            data: {
                id: id
            },
            success: function (data) {
                if (data == 'Yes') {
                    $('#table').bootstrapTable('refresh');
                }
                else {
                    alert('删除失败');
                }
            }
        })
    }

</script>


</body>
</html>
