<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/layui.css" />
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <!-- CSS样式 -->
    <script src="layui.js"></script>
    <title>Title</title>
</head>
<body>

<h1 style="font-family:verdana">参会人数</h1>
<a href="login.html">
    <button id="fat-btn" class="btn btn-default" data-loading-text="Loading..." type="button"> 返回
        <span class="glyphicon glyphicon-arrow-left"></span>
    </button>
    <script>
        $(function () {
            $(".btn").click(function () {
                $(this).button('loading').delay(1000).queue(function () {
                    // $(this).button('reset');
                    // $(this).dequeue();
                });
            });
        });
    </script>
</a>
<ul id="count"></ul>
<script>
    const samples = [
        {
            "id": "1",
            "name": "软件工程",
            "chairManId": "2",
            "branchforumId": "1,2,3",
            "startTime": "2021-03-27",
            "joinPaper": "3",
            "branchformuList": [
                {
                    "id": "1",
                    "theme": "软件工程实践",
                    "message": "1,2,3",
                    "listMessage": [],
                    "joinPaper": "1"
                },
                {
                    "id": "2",
                    "theme": "软件工程理论",
                    "message": "1,2,3",
                    "listMessage": [],
                    "joinPaper": "1"
                },
                {
                    "id": "3",
                    "theme": "软件工程其他",
                    "message": "1,2,3",
                    "listMessage": [],
                    "joinPaper": "1"
                }
            ]
        }
    ]

    $.ajax({
        url: '',// TODO()
        success: function (result) {
            const meetings = samples;
            // const meetings = JSON.parse(result);
            // TODO()
            renderMeetings(meetings);
        }
    })


    function renderMeetings(meetings) {
        const meetingListWrapper = document.getElementById('count');

        for (const meeting of meetings) {

            const outerLi = document.createElement('li');
            let p = document.createElement('p');
            p.append('会议名：' + meeting['name']);


            outerLi.append(p);
            p = document.createElement('p');
            p.append('参会人数：' + meeting['joinPaper']);

            outerLi.append(p);
            const ul = document.createElement('ul');
            for (const branchForum of meeting['branchformuList']) {
                const li = document.createElement('li');
                li.append('分会场名：' +branchForum['theme']);
                li.append('     参会人数：'+branchForum['joinPaper']);
                ul.append(li);
            }

            outerLi.append(ul);
            meetingListWrapper.append(outerLi);
        }
    }
</script>
<script>

    function loadXMLDoc()
    {
        var tbody=window.document.getElementById("tbody-result");
        //var a = JSON.parseJSON(d);
        console.log(d);
        $.ajax({
            url: "http://localhost:8080/TestServlet/controller/ListFileServlet",
            type: 'post',
            async: true,
            data: null,
            dataType:'json',
            success: function (data) {
                var a = JSON.parseJSON(d);
                console.log(a.code);
            },
            error: function (XMLHttpRequest, textStatus, error) {
                alert(error);
            }
        });
    }
</script>
</body>
</html>